!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.getExpandedCellData=void 0;var o=n(9),i=r(o),s=n(12),a=r(s),u=new Date;e.getExpandedCellData=function(){return new Promise(function(t,e){i.getExpandedMSPMap(u).then(function(e){t(e)})})};a.setupNavMenu(),a.setupModalShell(),i.getMSPMap(u).then(function(t){a.setupMSPBlocks(t)})},function(t,e,n){n(2),n(3),n(8),t.exports=n(0)},function(t,e,n){"use strict";/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){if("Element"in t){var e=t.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},i=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},a=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=a.prototype=[],c=function(){return new a(this)};if(i.prototype=Error.prototype,u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",-1!==s(this,t)},u.add=function(){var t,e=arguments,n=0,r=e.length,o=!1;do{t=e[n]+"",-1===s(this,t)&&(this.push(t),o=!0)}while(++n<r);o&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,r=0,o=n.length,i=!1;do{for(t=n[r]+"",e=s(this,t);-1!==e;)this.splice(e,1),i=!0,e=s(this,t)}while(++r<o);i&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},u.toString=function(){return this.join(" ")},n.defineProperty){var l={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",l)}catch(t){void 0!==t.number&&-2146823252!==t.number||(l.enumerable=!1,n.defineProperty(e,"classList",l))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(window.self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}())},function(t,e,n){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r){function o(){}function i(t,e){return function(){t.apply(e,arguments)}}function s(t){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function a(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,s._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?u:c)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)})}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":n(e))||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void l(t);if("function"==typeof r)return void d(i(r,e),t)}t._state=1,t._value=e,l(t)}catch(e){c(t,e)}}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}var p=setTimeout;s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var n=new this.constructor(o);return a(this,new f(t,e,n)),n},s.all=function(t){var e=Array.prototype.slice.call(t);return new s(function(t,r){function o(s,a){try{if(a&&("object"===(void 0===a?"undefined":n(a))||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(t){o(s,t)},r)}e[s]=a,0==--i&&t(e)}catch(t){r(t)}}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)o(s,e[s])})},s.resolve=function(t){return t&&"object"===(void 0===t?"undefined":n(t))&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,n){n(t)})},s.race=function(t){return new s(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){p(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},s._setImmediateFn=function(t){s._immediateFn=t},s._setUnhandledRejectionFn=function(t){s._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=s:r.Promise||(r.Promise=s)}(void 0)}).call(e,n(4).setImmediate)},function(t,e,n){"use strict";function r(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(5),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){"use strict";(function(t,e){!function(t,n){function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,a(u),u++}function o(t){delete c[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function s(t){if(l)setTimeout(s,0,t);else{var e=c[t];if(e){l=!0;try{i(e)}finally{o(t),l=!1}}}}if(!t.setImmediate){var a,u=1,c={},l=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;a=function(e){var n=f.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),d.setImmediate=r,d.clearImmediate=o}}("undefined"==typeof self?void 0===t?void 0:t:self)}).call(e,n(6),n(7))},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(d===clearTimeout)return clearTimeout(t);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){y&&h&&(y=!1,h.length?m=h.concat(m):v=-1,m.length&&u())}function u(){if(!y){var t=i(a);y=!0;for(var e=m.length;e;){for(h=m,m=[];++v<e;)h&&h[v].run();v=-1,e=m.length}h=null,y=!1,s(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(t){d=o}}();var h,m=[],y=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||y||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&g(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function m(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,r){t=e(t),r=n(r);var o=this.map[t];this.map[t]=o?o+","+r:r},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,r){this.map[e(t)]=n(r)},o.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];y.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=p,t.Response=y,t.fetch=function(t,e){return new Promise(function(n,r){var o=new p(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:m(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;n(new y(e,t))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.getExpandedMSPMap=e.getMSPMap=void 0;var o=n(10),i=r(o),s=n(11),a=r(s),u=null,c=null,l=null,f=function(t){var e=t.indexOf("T");t=t.substring(0,e),t=t.replace(/\s+/g,"");var n=t.split("-"),r=n[0],o=n[1],i=n[2];return new Date(r,o-1,i)},d=function(t,e){var n=f(e.ValidFromDate),r=null!=e.ValidUntilDate?f(e.ValidUntilDate):null;return t>=n&&t<=r||t>=n&&null==r},p=function(t,e,n){return n?function(r){return r[t]===e&&d(n,r)}:function(n){return n[t]===e}},h=function(t){switch(t){case"Convener":return 0;case"Co-Convener":return 1;case"Deputy Convener":return 2;case"Member":return 3;default:return 10}},m=function(t,e,n,r,o,s,a,u){n.forEach(function(n){var c=e.get(n.PersonID);if(c&&d(t,n)){var l=r.find(p("ID",n[o]));if(s&&a){var f=s.find(p("ID",n[a])),m=h(l.Name);c[u].push(new i.Role(f.Name,l.Name,m))}else c[u].push(l.Name)}})},y=function(t,e,n,r,o,s){e.forEach(function(e){var a=t.get(e.PersonID);if(a){var u=r.find(p("ID",e[o])).Name;if("Line1"===n){var c=e.Line1+", "+e.Line2,l=new i.Address(u,c,e.PostCode,e.Region,e.Town);a[s].push(l)}else if(e[n]){var f=new i.Contact(u,e[n]);a[s].push(f)}}})},v=function(t,e){var n=new Map;return e.regResults.concat(e.constitResults).forEach(function(r){if(d(t,r)){var o=new i.MSP;if(r.ConstituencyID){var s=e.constituencies.find(p("ID",r.ConstituencyID));o.constit=new i.Area(s.Name,s.ConstituencyCode);var a=e.regions.find(p("ID",s.RegionID));o.region=new i.Area(a.Name,a.RegionCode)}else{var u=e.regions.find(p("ID",r.RegionID));o.region=new i.Area(u.Name,u.RegionCode)}n.set(r.PersonID,o)}}),e.basicMSPData.forEach(function(t){var e=n.get(t.PersonID);if(e){var r=t.ParliamentaryName.split(",");e.firstName=r[1],e.lastName=r[0],t.BirthDateIsProtected||(e.DOB=f(t.BirthDate)),e.photoURL=t.PhotoURL}}),e.partyMemberships.forEach(function(r){var o=n.get(r.PersonID);if(o&&d(t,r)){var s=e.parties.find(p("ID",r.PartyID));o.party=new i.Party(s.ActualName,s.Abbreviation);var a=e.partyMemberRoles.filter(p("MemberPartyID",r.ID,t));a&&a.forEach(function(t){var n=e.partyRoles.find(p("ID",t.PartyRoleTypeID));o.partyRoles.push(new i.PartyRole(n.Name,t.Notes))})}}),m(t,n,e.govtMemberRoles,e.govtRoles,"GovernmentRoleID","","","govtRoles"),n},b=function(t,e){m(t,l,e.membercpgRoles,e.cpgRoles,"CrossPartyGroupRoleID",e.cpgs,"CrossPartyGroupID","cpgRoles"),m(t,l,e.memberCommitteeRoles,e.committeeRoles,"CommitteeRoleID",e.committees,"CommitteeID","committeeRoles"),y(l,e.addresses,"Line1",e.addressTypes,"AddressTypeID","addresses"),y(l,e.emails,"Address",e.emailTypes,"EmailAddressTypeID","emails"),y(l,e.telephones,"Telephone1",e.telephoneTypes,"TelephoneTypeID","telephones"),y(l,e.websites,"WebURL",e.websiteTypes,"WebSiteTypeID","websites")};e.getMSPMap=function(t){return new Promise(function(e,n){u?e(l):a.getInitialMSPData().then(function(n){u=n,l=v(t,u),e(l)})})},e.getExpandedMSPMap=function(t){return new Promise(function(e,n){c?e(l):a.getExpandedMSPData().then(function(n){c=n,b(t,c),e(l)})})}},function(t,e,n){"use strict";function r(t,e){this.name=t,this.code=e}function o(t,e){this.name=t,this.abbreviation=e}function i(t,e){this.internalName=t,this.officialName=e}function s(t,e,n,r,o){this.type=t,this.street=e,this.postCode=n,this.region=r,this.town=o}function a(t,e,n){this.roleName=e,this.groupName=t,this.roleRank=n}function u(t,e){this.type=t,this.value=e}function c(t,e,n,r,o,i,s,a){this.constit=e,this.region=n,this.firstName=r,this.lastName=o,this.DOB=i,this.photoURL=s,this.party=a,this.partyRoles=[],this.govtRoles=[],this.committeeRoles=[],this.cpgRoles=[],this.addresses=[],this.emails=[],this.telephones=[],this.websites=[]}Object.defineProperty(e,"__esModule",{value:!0}),e.Area=r,e.Party=o,e.PartyRole=i,e.Address=s,e.Role=a,e.Contact=u,e.MSP=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="https://data.parliament.scot/api/",o=function(t){return new Promise(function(e,n){fetch(t,{method:"get"}).then(function(t){return t.json()}).then(function(t){e(t)})})};e.getInitialMSPData=function(){return new Promise(function(t,e){Promise.all([o(r+"members"),o(r+"MemberElectionConstituencyStatuses"),o(r+"MemberElectionregionStatuses"),o(r+"constituencies"),o(r+"regions"),o(r+"parties"),o(r+"memberparties"),o(r+"partyroles"),o(r+"memberpartyroles"),o(r+"governmentroles"),o(r+"membergovernmentroles")]).then(function(e){var n={basicMSPData:e[0],constitResults:e[1],regResults:e[2],constituencies:e[3],regions:e[4],parties:e[5],partyMemberships:e[6],partyRoles:e[7],partyMemberRoles:e[8],govtRoles:e[9],govtMemberRoles:e[10]};t(n)})})},e.getExpandedMSPData=function(){return new Promise(function(t,e){Promise.all([o(r+"addresses"),o(r+"addresstypes"),o(r+"telephones"),o(r+"telephonetypes"),o(r+"emailaddresses"),o(r+"emailaddresstypes"),o(r+"websites"),o(r+"websitetypes"),o(r+"membercrosspartyroles"),o(r+"crosspartygrouproles"),o(r+"crosspartygroups"),o(r+"personcommitteeroles"),o(r+"committeeroles"),o(r+"committees"),o(r+"committeetypelinks"),o(r+"committeetypes")]).then(function(e){var n={addresses:e[0],addressTypes:e[1],telephones:e[2],telephoneTypes:e[3],emails:e[4],emailTypes:e[5],websites:e[6],websiteTypes:e[7],membercpgRoles:e[8],cpgRoles:e[9],cpgs:e[10],memberCommitteeRoles:e[11],committeeRoles:e[12],committees:e[13],committeeTypeLinks:e[14],committeeTypes:e[15]};t(n)})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setupModalShell=e.setupNavMenu=e.setupMSPBlocks=void 0;var r=n(0),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),i=document.getElementsByTagName("main")[0],s=function(t){if(t.DOB){var e=t.DOB;return"<p>"+(e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear())+"</p>"}return""},a=function(t,e){if(t.partyRoles&&t.partyRoles.length>0){var n="";return n=t.partyRoles.map(function(t){return t.officialName?t.officialName:t.internalName})[t.partyRoles.length-1],t.partyRoles.find(function(t){return"Party Leader"==t.internalName})&&"Green"===t.party.abbreviation&&(n="Co-Convener; "+n),3812==e&&(n="Finance Spokesperson"),5119==e&&(n="Interim Leader; Community, Social Security and Equalities Spokesperson"),'<p class="msp-role">'+(n=n.replace(/\\r\\n/,", "))+"</p>"}return""},u=function(t){if(t.govtRoles&&t.govtRoles.length>0){return'<p class="msp-role">'+l(t.govtRoles).join(", ")+"</p>"}return""},c=function(t){var e="";return e=t.constit?t.constit.name:t.region.name,e=e.replace(/ and /g," & ")},l=function(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})},f=function(t){return t.sort(function(t,e){return t.roleRank-e.roleRank})},d=function(t,e){var n=s(t),r=a(t,e),o=u(t),i="";t.emails&&t.emails.length>0&&(i=t.emails.map(function(t){return'<li> <a href="mailto:'+t.value+'">'+t.type+"</a></li>"}).join(""));var c="";t.websites&&t.websites.length>0&&(c=t.websites.map(function(t){return'<li> <a href="'+t.value+'">'+t.type+"</a></li>"}).join(""));var l="";t.addresses&&t.addresses.length>0&&(l=t.addresses.map(function(t){return"<p>\n\t\t\t\t\t<strong> "+t.type+" Address: </strong>\n\t\t\t\t\t"+t.street+"\n\t\t\t\t\t"+t.postCode+"\n\t\t\t\t\t"+(t.region?t.region:"")+"\n\t\t\t\t\t"+t.town+"\n\n\t\t\t</p>"}).join(""));var d=f(t.committeeRoles).map(function(t){return"<li>\n\t"+("Member"===t.roleName?"":t.roleName+" &ndash;").replace(/Substitute Member/g,"Substitute")+"\n\t"+t.groupName+"\n\t</li>"}).join(""),p=f(t.cpgRoles).map(function(t){return"<li>\n\t"+("Member"===t.roleName?"":t.roleName+" &ndash;")+"\n\t"+t.groupName.replace(/Cross-Party Group in the Scottish Parliament on/g,"")+"\n\t</li>"}).join("");return'\n\t<div class="modal--box-pbox">\n\t\n\t\t<img class="modal--box-img" src="'+t.photoURL+'"></img>\n\t\t\n\t\t<h3 class="msp-name">'+t.firstName+" "+t.lastName+"</h3>\n\t\t"+(n||"")+"\n\t\t<p>"+t.party.name+"</p>\n\t\t<p>"+(t.constit?t.constit.name+", ":"")+t.region.name+"</p>\n\t\t"+(r||"")+"\n\t\t"+(o||"")+'\n\n\t</div>\n\t\n\t<div class="modal--box-txtbox">\n\t\n\t\t<h4>Contact</h4>\n\n\t\t'+(l||"")+"\n\n\t\t"+(i||"")+"\n\n\t\t"+(c||"")+"\n\n\t\t"+(d&&d.length>0?"\n\t\t<h4>Committees</h4>\n\t\t<ul>"+d+"</ul>\n\t\t":"")+"\n\t\t\n\t\t"+(p&&p.length>0?"\n\t\t<h4>Cross-Party Groups</h4>\n\t\t<ul>"+p+"</ul>\n\t\t":"")+"\n\t\t\n\t</div>\n\t"},p=function(t){return function(){var e=document.getElementsByClassName("modal")[0];if(e.classList.contains("modal__hidden")){var n=document.getElementsByClassName("modal--box")[0],r=document.getElementsByClassName("modal--box-content")[0];e.classList.toggle("modal__hidden"),o.getExpandedCellData().then(function(e){var o=e.get(t);r.innerHTML=d(o,t),n.appendChild(r)})}}};e.setupMSPBlocks=function(t){var e="",n=document.createElement("div");n.classList.add("cell-container"),t.forEach(function(t,n){var r=c(t),o=t.photoURL,i=t.firstName+" portrait";if(o){var s=o.substring(o.lastIndexOf("/")+1);s=s.replace(/\s+/g,""),o="/img/portraits/"+s+".jpg"}else o="#";var l=u(t),f=!(!l||-1!=l.search("Parliamentary Liaison Officer")),d=a(t,n),p="cell__pty-"+t.party.abbreviation,h='\n\t\t\t<div id="'+n+'" class="cell '+p+" "+(f?"cell__mini":"")+'">\n\t\t\t\t<div class="portrait-box">\n\t\t\t\t\t<img class="portrait-img" src="http://via.placeholder.com/75x75" alt="'+i+'">\n\t\t\t\t</div>\n\t\t\t\t<div class="txtbox">\n\t\t\t\t\t<h4 class="msp-name">'+t.firstName+" "+t.lastName+'</h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t<span class="msp-party">('+t.party.abbreviation+')</span>\n\t\t\t\t\t<span class="msp-location">('+r+")</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t"+(l||"")+"\n\t\t\t\t\t"+(d||"")+"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t";e+=h}),n.innerHTML=e,i.appendChild(n);for(var r=0;r<n.children.length;r++){var o=n.children[r];o.addEventListener("click",p(Number(o.id)))}},e.setupNavMenu=function(){var t=document.getElementsByClassName("nav--menu-wrapper")[0],e=document.getElementsByClassName("nav--burger")[0],n=document.getElementsByClassName("nav--menu")[0],r=window.matchMedia("(min-width: 640px)"),o=function(e){return function(){n.classList.remove("nav--menu__open"),n.classList.remove("nav--menu__was-opened"),t.classList.toggle("nav--menu-wrapper",e.matches),t.classList.toggle("nav--menu-mobile-wrapper",!e.matches)}};e.addEventListener("click",function(){return function(){n.classList.toggle("nav--menu__open"),n.classList.contains("nav--menu__was-opened")||n.classList.add("nav--menu__was-opened")}}()),r.addListener(o(r)),window.onload=o(r)},e.setupModalShell=function(){i.innerHTML+='\n\t<div class="modal">\n\t\t<div class="modal--box">\n\t\t\t<div class="modal--close">&times;</div>\n\t\t\t<div class ="modal--box-content"><div>\n\t\t</div>\n\t</div>\n\t';var t=document.getElementsByClassName("modal")[0];document.getElementsByClassName("modal--close")[0].addEventListener("click",function(t){return function(){t.classList.toggle("modal__hidden")}}(t)),t.classList.toggle("modal__hidden")}}]);